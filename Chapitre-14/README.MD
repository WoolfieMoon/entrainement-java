## Chapitre 14 ‚Äì Les Portails de Donn√©es : JDBC et base de donn√©es

Au fond du Temple des Archives Perdues, se trouvent des portails vers des mondes persistants. Ces portails, appel√©s bases de donn√©es, permettent aux mages de stocker et retrouver leurs connaissances √† travers les √¢ges. Gr√¢ce √† la magie du JDBC, tu apprendras √† les invoquer.

Dans ce chapitre, tu vas apprendre √† :

    - Te connecter √† une base de donn√©es SQLite avec JDBC

    - Cr√©er des tables magiques (grimoire, √©l√®ves, artefacts‚Ä¶)

    - Ins√©rer, lire, mettre √† jour et supprimer des donn√©es

    - G√©rer les exceptions li√©es √† la persistance magique
# Exercice 1 ‚Äì Ouverture du portail magique (connexion JDBC)

**Contexte narratif :**  
Tu as d√©couvert un ancien **portail de savoir** : une base de donn√©es. Pour la premi√®re fois, tu vas √©tablir un **lien mystique** avec elle.

**√ânonc√© :**
1. Cr√©e une classe `ConnexionPortail`.
2. Connecte-toi √† une base SQLite nomm√©e `grimoire.db`.
3. Affiche dans la console :

‚úÖ Portail magique ouvert !

4. N‚Äôoublie pas de fermer la connexion correctement √† la fin.

**Remarques techniques :**
- Utilise le driver `org.sqlite.JDBC`
- Cha√Æne de connexion : `jdbc:sqlite:grimoire.db`

# Exercice 2 ‚Äì Cr√©ation de la table des sorts

**Contexte narratif :**  
Tu veux cr√©er une **table de sortil√®ges** qui pourra enregistrer les incantations utilis√©es au fil du temps.

**√ânonc√© :**
1. Dans la base `grimoire.db`, cr√©e une table `sorts` avec :
    - `id` (entier, cl√© primaire, auto-incr√©ment√©)
    - `nom` (texte)
    - `puissance` (entier)
2. Affiche :

‚úÖ Table 'sorts' cr√©√©e avec succ√®s.


**Conseils :**
- Utilise `Statement` et `executeUpdate(...)`
- V√©rifie que la table n‚Äôest pas recr√©√©e si elle existe

# Exercice 3 ‚Äì Insertion de sortil√®ges

**Contexte narratif :**  
Les mages ont retrouv√© une liste de sorts qu‚Äôil faut **consigner dans le grimoire central**.

**√ânonc√© :**
1. Ajoute dans la table `sorts` :
    - `"√âclair"`, 80
    - `"Feu"`, 100
    - `"Invisibilit√©"`, 60
2. Utilise une `PreparedStatement` pour s√©curiser les insertions.
3. Affiche :

‚ú® Sort "<nom>" ins√©r√© avec succ√®s.
# Exercice 4 ‚Äì Lecture des sorts stock√©s

**Contexte narratif :**  
Tu veux afficher la **liste compl√®te** des sortil√®ges enregistr√©s dans la base.

**√ânonc√© :**
1. Utilise un `SELECT * FROM sorts`
2. Affiche chaque ligne ainsi :

[ID] √âclair (80)

3. N‚Äôoublie pas de fermer le `ResultSet` et la connexion.

# Exercice 5 ‚Äì Suppression d‚Äôun sort interdit

**Contexte narratif :**  
Le Conseil a d√©cid√© d‚Äôeffacer toute trace du sort `"Feu"` jug√© trop dangereux.

**√ânonc√© :**
1. Supprime de la table `sorts` tous les sorts dont `nom = 'Feu'`.
2. Affiche :

‚ùå Sort 'Feu' supprim√© du grimoire.

3. V√©rifie le nombre de lignes supprim√©es et affiche un message adapt√© si aucun sort n‚Äôa √©t√© trouv√©.

# Exercice 6 ‚Äì Mise √† jour d‚Äôun sortil√®ge

**Contexte narratif :**  
Le sort `"√âclair"` a √©t√© **renforc√©**. Il faut mettre √† jour sa **puissance magique** dans le grimoire.

**√ânonc√© :**
1. Mets √† jour le sort `"√âclair"` pour que sa puissance passe de 80 √† 95.
2. Affiche :

üîÑ Sort '√âclair' mis √† jour.

3. V√©rifie le nombre de lignes affect√©es pour confirmer la modification.

# Exercice 7 ‚Äì Tri des sortil√®ges par puissance

**Contexte narratif :**  
Les archivistes veulent conna√Ætre les sorts **les plus puissants** enregistr√©s √† ce jour.

**√ânonc√© :**
1. Fais un `SELECT * FROM sorts ORDER BY puissance DESC`
2. Affiche les sorts du plus puissant au moins puissant :

Feu (100)
√âclair (95)
Invisibilit√© (60)
# Exercice 8 ‚Äì Recherche magique par mot-cl√©

**Contexte narratif :**  
Un mage recherche tous les sorts contenant la **syllabe** `"vis"` (par exemple : `"Invisibilit√©"`).

**√ânonc√© :**
1. Utilise un `LIKE` pour faire une recherche :

SELECT * FROM sorts WHERE nom LIKE '%vis%'

2. Affiche les r√©sultats sous la forme :

Sort trouv√© : Invisibilit√© (60)
# Exercice 9 ‚Äì Comptage des sorts enregistr√©s

**Contexte narratif :**  
Le Conseil veut conna√Ætre le **nombre total** de sortil√®ges consign√©s dans la base.

**√ânonc√© :**
1. Utilise :

SELECT COUNT(*) FROM sorts

2. Affiche :

üìö Nombre total de sorts : <valeur>
# Exercice 10 ‚Äì Cr√©ation automatique de la base

**Contexte narratif :**  
√Ä l‚Äôouverture du portail, la **base doit se cr√©er si elle n‚Äôexiste pas**, avec la table d√©j√† pr√™te √† l‚Äôemploi.

**√ânonc√© :**
1. Cr√©e une classe `PortailAuto`.
2. √Ä l‚Äôex√©cution :
    - Cr√©e `grimoire.db` si elle n‚Äôexiste pas
    - Cr√©e la table `sorts` si elle est absente
3. Affiche :

üåÄ Grimoire initialis√© avec succ√®s.

4. Tu peux utiliser `IF NOT EXISTS` dans la requ√™te SQL.

